@baseUrl = {{$dotenv baseUrl}}

### ========================================
### COVER LETTER GENERATION - SUCCESS CASES
### ========================================

### Generate Cover Letter - Detailed CV
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "We are looking for a Senior Software Engineer with 5+ years of experience in .NET and C#. The ideal candidate should have experience with microservices architecture, REST APIs, and cloud technologies (Azure/AWS). Strong knowledge of SQL databases and Entity Framework is required. Experience with Docker and Kubernetes is a plus.",
  "cvText": "John Doe - Senior Software Developer\n\nExperience:\n- 6 years of software development experience\n- Proficient in C#, .NET Core, ASP.NET\n- Built microservices using Docker and Kubernetes\n- Extensive experience with SQL Server and PostgreSQL\n- Worked with Azure cloud services\n- Led a team of 4 developers\n\nSkills: C#, .NET, ASP.NET Core, Entity Framework, SQL Server, PostgreSQL, Docker, Kubernetes, Azure, REST APIs, Git\n\nEducation: BSc Computer Science"
}

### Generate Cover Letter - Junior Position
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "Junior Developer position at a startup.",
  "cvText": "Jane Smith - Recent Graduate with BSc Computer Science"
}

### Generate Cover Letter - Custom Template
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "Junior Developer position at a startup. We need someone eager to learn, with basic programming knowledge.",
  "cvText": "Jane Smith - Recent Graduate\n\nEducation: BSc Computer Science (2024)\n\nProjects:\n- Built a web app using React and Node.js\n- Created a mobile app using Flutter\n\nSkills: JavaScript, Python, React, Node.js, Git",
  "customPromptTemplate": "Write a SHORT and enthusiastic cover letter (2 paragraphs max) for a junior developer position.\n\nJob:\n{0}\n\nCandidate Info:\n{1}\n\nCover letter:"
}

### Generate Cover Letter - Using CV ID
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "Senior .NET Developer with Azure experience needed for enterprise software development.",
  "cvId": "YOUR_CV_ID_HERE",
  "idempotencyKey": "cover-letter-gen-001"
}

### ========================================
### IDEMPOTENCY TESTS
### ========================================

### Idempotency - First Call (should call Groq API)
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "Software Engineer at Tech Company",
  "cvText": "John Doe - 5 years experience in .NET and C#",
  "idempotencyKey": "test-key-12345"
}

### Idempotency - Second Call (should return cached response)
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "Software Engineer at Tech Company",
  "cvText": "John Doe - 5 years experience in .NET and C#",
  "idempotencyKey": "test-key-12345"
}

### Idempotency - Different Key (should call Groq API again)
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "Software Engineer at Tech Company",
  "cvText": "John Doe - 5 years experience in .NET and C#",
  "idempotencyKey": "test-key-67890"
}

### Without Idempotency Key (normal execution, no caching)
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "Software Engineer at Tech Company",
  "cvText": "John Doe - 5 years experience in .NET and C#"
}

### ========================================
### VALIDATION ERROR TESTS
### ========================================

### Validation Error - Empty Fields
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "",
  "cvText": ""
}

### Validation Error - Missing Required Fields
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
}

### Validation Error - Only Job Description
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "Software Developer position"
}

### Validation Error - Only CV Text
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "cvText": "John Doe - Developer with 5 years experience"
}

### Validation Error - Whitespace Only
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "   ",
  "cvText": "   "
}

### ========================================
### HTTP ERROR TESTS
### ========================================

### Wrong Content-Type (should return 415)
POST {{baseUrl}}/api/v1/cover-letters/generate
Content-Type: text/plain

jobDescription=Test&cvText=Test

### Invalid API Version (should return 404)
POST {{baseUrl}}/api/v99/cover-letters/generate
Content-Type: application/json

{
  "jobDescription": "Test",
  "cvText": "Test"
}

### Non-existent Endpoint (should return 404)
POST {{baseUrl}}/api/v1/cover-letters/unknown
Content-Type: application/json

{
  "jobDescription": "Test",
  "cvText": "Test"
}

### Wrong HTTP Method (should return 405)
GET {{baseUrl}}/api/v1/cover-letters/generate
Accept: application/json

###
